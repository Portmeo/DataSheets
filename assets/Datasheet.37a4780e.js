import{g as B,a as L,s as R,P as ie,r as f,u as H,_ as E,b as i,j as o,c as D,d as _,T as I,e as P,B as de,f as pe,h as A,i as G,k as ue,l as me,m as he,n as fe,o as Ce,I as Z,p as S,q as be,A as xe,C as T,t as ee,F as ge,L as ve,v as ye}from"./index.1fd62262.js";import{u as we,M as Se}from"./useCategory.f50a310a.js";import{M as ke,C as Fe,i as Pe,T as Re,D as X}from"./datasheet.service.56d4c65f.js";import{u as q,f as te,M as $e,F as Me,T as Ie}from"./TextField.ccb8e98e.js";import{T as Ne}from"./Tooltip.ded805f2.js";import"./category.service.3b42c934.js";function Te(e){return B("MuiCard",e)}L("MuiCard",["root"]);const De=["className","raised"],Be=e=>{const{classes:t}=e;return _({root:["root"]},Te,t)},Le=R(ie,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),Ee=f.exports.forwardRef(function(t,r){const s=H({props:t,name:"MuiCard"}),{className:a,raised:l=!1}=s,u=E(s,De),c=i({},s,{raised:l}),m=Be(c);return o(Le,i({className:D(m.root,a),elevation:l?8:void 0,ref:r,ownerState:c},u))}),_e=Ee;function He(e){return B("MuiCardContent",e)}L("MuiCardContent",["root"]);const ze=["className","component"],Ae=e=>{const{classes:t}=e;return _({root:["root"]},He,t)},Oe=R("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Ue=f.exports.forwardRef(function(t,r){const s=H({props:t,name:"MuiCardContent"}),{className:a,component:l="div"}=s,u=E(s,ze),c=i({},s,{component:l}),m=Ae(c);return o(Oe,i({as:l,className:D(m.root,a),ownerState:c,ref:r},u))}),je=Ue;function Ge(e){return B("MuiCardHeader",e)}const qe=L("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Y=qe,We=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Ve=e=>{const{classes:t}=e;return _({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Ge,t)},Je=R("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>i({[`& .${Y.title}`]:t.title,[`& .${Y.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),Ke=R("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Qe=R("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Xe=R("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),Ye=f.exports.forwardRef(function(t,r){const s=H({props:t,name:"MuiCardHeader"}),{action:a,avatar:l,className:u,component:c="div",disableTypography:m=!1,subheader:n,subheaderTypographyProps:p,title:C,titleTypographyProps:y}=s,$=E(s,We),x=i({},s,{component:c,disableTypography:m}),h=Ve(x);let b=C;b!=null&&b.type!==I&&!m&&(b=o(I,i({variant:l?"body2":"h5",className:h.title,component:"span",display:"block"},y,{children:b})));let g=n;return g!=null&&g.type!==I&&!m&&(g=o(I,i({variant:l?"body2":"body1",className:h.subheader,color:"text.secondary",component:"span",display:"block"},p,{children:g}))),P(Je,i({className:D(h.root,u),as:c,ref:r,ownerState:x},$,{children:[l&&o(Ke,{className:h.avatar,ownerState:x,children:l}),P(Xe,{className:h.content,ownerState:x,children:[b,g]}),a&&o(Qe,{className:h.action,ownerState:x,children:a})]}))}),Ze=Ye;function et(e){return B("PrivateSwitchBase",e)}L("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const tt=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],ot=e=>{const{classes:t,checked:r,disabled:s,edge:a}=e,l={root:["root",r&&"checked",s&&"disabled",a&&`edge${A(a)}`],input:["input"]};return _(l,et,t)},rt=R(de)(({ownerState:e})=>i({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),at=R("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),st=f.exports.forwardRef(function(t,r){const{autoFocus:s,checked:a,checkedIcon:l,className:u,defaultChecked:c,disabled:m,disableFocusRipple:n=!1,edge:p=!1,icon:C,id:y,inputProps:$,inputRef:x,name:h,onBlur:b,onChange:g,onFocus:d,readOnly:k,required:v,tabIndex:w,type:F,value:V}=t,re=E(t,tt),[J,ae]=pe({controlled:a,default:Boolean(c),name:"SwitchBase",state:"checked"}),N=q(),se=M=>{d&&d(M),N&&N.onFocus&&N.onFocus(M)},ne=M=>{b&&b(M),N&&N.onBlur&&N.onBlur(M)},le=M=>{if(M.nativeEvent.defaultPrevented)return;const Q=M.target.checked;ae(Q),g&&g(M,Q)};let z=m;N&&typeof z>"u"&&(z=N.disabled);const ce=F==="checkbox"||F==="radio",U=i({},t,{checked:J,disabled:z,disableFocusRipple:n,edge:p}),K=ot(U);return P(rt,i({component:"span",className:D(K.root,u),centerRipple:!0,focusRipple:!n,disabled:z,tabIndex:null,role:void 0,onFocus:se,onBlur:ne,ownerState:U,ref:r},re,{children:[o(at,i({autoFocus:s,checked:a,defaultChecked:c,className:K.input,disabled:z,id:ce&&y,name:h,onChange:le,readOnly:k,ref:x,required:v,ownerState:U,tabIndex:w,type:F},F==="checkbox"&&V===void 0?{}:{value:V},$)),J?l:C]}))}),nt=st,lt=G(o("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),ct=G(o("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),it=G(o("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function dt(e){return B("MuiCheckbox",e)}const pt=L("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),j=pt,ut=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],mt=e=>{const{classes:t,indeterminate:r,color:s}=e,a={root:["root",r&&"indeterminate",`color${A(s)}`]},l=_(a,dt,t);return i({},t,l)},ht=R(nt,{shouldForwardProp:e=>ue(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,r.color!=="default"&&t[`color${A(r.color)}`]]}})(({theme:e,ownerState:t})=>i({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:me(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${j.checked}, &.${j.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${j.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),ft=o(ct,{}),Ct=o(lt,{}),bt=o(it,{}),xt=f.exports.forwardRef(function(t,r){var s,a;const l=H({props:t,name:"MuiCheckbox"}),{checkedIcon:u=ft,color:c="primary",icon:m=Ct,indeterminate:n=!1,indeterminateIcon:p=bt,inputProps:C,size:y="medium",className:$}=l,x=E(l,ut),h=n?p:m,b=n?p:u,g=i({},l,{color:c,indeterminate:n,size:y}),d=mt(g);return o(ht,i({type:"checkbox",inputProps:i({"data-indeterminate":n},C),icon:f.exports.cloneElement(h,{fontSize:(s=h.props.fontSize)!=null?s:y}),checkedIcon:f.exports.cloneElement(b,{fontSize:(a=b.props.fontSize)!=null?a:y}),ownerState:g,ref:r,className:D(d.root,$)},x,{classes:d}))}),gt=xt;function vt(e){return B("MuiFormControlLabel",e)}const yt=L("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),O=yt,wt=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],St=e=>{const{classes:t,disabled:r,labelPlacement:s,error:a}=e,l={root:["root",r&&"disabled",`labelPlacement${A(s)}`,a&&"error"],label:["label",r&&"disabled"]};return _(l,vt,t)},kt=R("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${O.label}`]:t.label},t.root,t[`labelPlacement${A(r.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>i({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${O.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${O.label}`]:{[`&.${O.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Ft=f.exports.forwardRef(function(t,r){var s;const a=H({props:t,name:"MuiFormControlLabel"}),{className:l,componentsProps:u={},control:c,disabled:m,disableTypography:n,label:p,labelPlacement:C="end",slotProps:y={}}=a,$=E(a,wt),x=q();let h=m;typeof h>"u"&&typeof c.props.disabled<"u"&&(h=c.props.disabled),typeof h>"u"&&x&&(h=x.disabled);const b={disabled:h};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof c.props[F]>"u"&&typeof a[F]<"u"&&(b[F]=a[F])});const g=te({props:a,muiFormControl:x,states:["error"]}),d=i({},a,{disabled:h,labelPlacement:C,error:g.error}),k=St(d),v=(s=y.typography)!=null?s:u.typography;let w=p;return w!=null&&w.type!==I&&!n&&(w=o(I,i({component:"span"},v,{className:D(k.label,v==null?void 0:v.className),children:w}))),P(kt,i({className:D(k.root,l),ownerState:d,ref:r},$,{children:[f.exports.cloneElement(c,b),w]}))}),Pt=Ft;function Rt(e){return B("MuiFormGroup",e)}L("MuiFormGroup",["root","row","error"]);const $t=["className","row"],Mt=e=>{const{classes:t,row:r,error:s}=e;return _({root:["root",r&&"row",s&&"error"]},Rt,t)},It=R("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>i({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Nt=f.exports.forwardRef(function(t,r){const s=H({props:t,name:"MuiFormGroup"}),{className:a,row:l=!1}=s,u=E(s,$t),c=q(),m=te({props:s,muiFormControl:c,states:["error"]}),n=i({},s,{row:l,error:m.error}),p=Mt(n);return o(It,i({className:D(p.root,a),ownerState:n,ref:r},u))}),Tt=Nt;var W={},Dt=fe.exports;Object.defineProperty(W,"__esModule",{value:!0});var oe=W.default=void 0,Bt=Dt(he()),Lt=Ce,Et=(0,Bt.default)((0,Lt.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");oe=W.default=Et;const _t=({datasheet:e,actions:t})=>{var n;const r=t?Object.keys(t):void 0,[s,a]=f.exports.useState(null),l=Boolean(s),u=p=>{a(p.currentTarget)},c=()=>{a(null)},m=P("div",{children:[e.model&&o("span",{children:e.model}),o("br",{}),o("span",{className:"code",children:e.code})]});return P(_e,{sx:{maxWidth:250},children:[o(Ze,{action:o(Z,{"aria-label":"settings","aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:u,children:o(oe,{})}),title:e.name,titleTypographyProps:{variant:"subtitle1"},subheader:m,subheaderTypographyProps:{variant:"subtitle2"}}),o($e,{id:"basic-menu",anchorEl:s,open:l,onClose:c,MenuListProps:{"aria-labelledby":"basic-button"},children:t&&r&&r.map(p=>o(ke,{onClick:()=>{c(),t[p].action(e._id)},children:t[p].icon},p))}),o(S,{display:"flex",flexWrap:"wrap",justifyContent:"center",children:o(Fe,{sx:{width:250,height:250},component:"img",image:(n=e.image)!=null?n:Pe,alt:"img"})}),o(I,{component:"p",sx:{m:1},children:e==null?void 0:e.description}),o(je,{className:"card-datasheet",sx:{p:1,"&:last-child":{pb:1}},children:o(Re,{datasheet:e})})]})},Ht=()=>{const e=be(),[t,r]=f.exports.useState([]),[s,a]=f.exports.useState([]),[l,u]=f.exports.useState(""),[c,m]=f.exports.useState([]),[n,p]=f.exports.useState(""),[C,y]=f.exports.useState(1),$=async()=>{const d=await X.getAll();d&&(r(d),a(d))},x=async d=>{await X.delete(d)&&(r(v=>v.filter(w=>w._id!==d)),a(v=>v.filter(w=>w._id!==d)),u(""))},h={cancel:{action:()=>u("")},confirm:{action:d=>x(d)}},b={edit:{icon:T.ICONS.EDIT,action:d=>e(d)},delete:{icon:T.ICONS.DELETE,action:d=>u(d)}},g=()=>{const d=t.filter(k=>{let v=!0;const w=k.categories;return c.forEach(F=>{v=w.includes(F)}),v}).filter(k=>{var v;return k.code.toLowerCase().includes(n)||k.name.toLowerCase().includes(n)||((v=k.model)==null?void 0:v.toLowerCase().includes(n))});a(d)};return f.exports.useEffect(()=>{g()},[c,n,C]),f.exports.useEffect(()=>{$()},[]),f.exports.useEffect(()=>()=>{xe.reset()}),{datasheets:t,deleteDatasheet:l,actionsModal:h,actionsCard:b,datasheetsToShow:s,setDatasheetsToShow:a,categoryFilter:c,setCategoryFilter:m,searchFilter:n,setSearchFilter:p,paginationFilter:C,setPaginationFilter:y}};const zt=({filterAction:e})=>{const{t}=ee(),{categories:r}=we(),s=a=>{e(a.target.value)};return o(ge,{children:P(S,{display:"flex",flexDirection:"column",children:[o(I,{variant:"h6",component:"div",sx:{color:"#1976D2"},children:t(T.CATEGORIES)}),o(Tt,{children:r.map(a=>o(Pt,{control:o(gt,{}),value:a._id,onChange:s,label:a.name},a._id))})]})})},Wt=()=>{const{t:e}=ee(),{deleteDatasheet:t,actionsModal:r,actionsCard:s,datasheetsToShow:a,setCategoryFilter:l,setSearchFilter:u}=Ht(),c=()=>n=>{var C;const p=(C=n.target.value)==null?void 0:C.toLowerCase();u(p)},m=n=>{l(p=>{let C=[...p];return C.includes(n)?C=C.filter(y=>y!==n):C.push(n),C})};return P(S,{display:"flex",flexDirection:"column",children:[o(S,{display:"flex",justifyContent:"flex-end",children:o(ve,{to:"new",children:o(Ne,{title:`${e(T.CREATE)}  ${e(T.DATASHEET)}`,children:o(Z,{children:T.ICONS.ADD})})})}),P(S,{display:"flex",sx:{mt:1,flexDirection:{xs:"column",md:"row",lg:"row"}},children:[o(S,{display:"flex",sx:{mt:3,width:{xs:"100%",md:"20%",lg:"15%"}},children:o(zt,{filterAction:m})}),P(S,{display:"flex",flexDirection:"column",sx:{mt:1,width:{xs:"100%",md:"80%",lg:"85%"}},children:[o(S,{sx:{mt:1,width:{xs:"100%",md:"50%",lg:"50%"}},children:o(Me,{fullWidth:!0,margin:"normal",children:o(Ie,{size:"small",label:e(T.SEARCH),onChange:c()})})}),o(S,{display:"flex",flexWrap:"wrap",sx:{mt:1,justifyContent:{xs:"center",md:"flex-start",lg:"flex-start"}},children:a.map(n=>o(S,{sx:{m:1},children:o(_t,{datasheet:n,actions:s})},n._id))}),t&&o(Se,{isOpen:!!t,handlerClose:r.cancel.action,children:P(S,{children:[o(I,{component:"div",sx:{flexGrow:1},children:e(T.MESSAGE_ACTIONS.DELETE)}),o(S,{className:"actions-modal",children:r&&Object.keys(r).map(n=>o(ye,{variant:"contained",onClick:()=>r[n].action(t),children:e(n)},n))})]})})]})]})]})};export{Wt as Datasheet};
