import{g as B,a as L,s as S,P as ie,r as C,u as H,_ as E,b as d,j as t,c as N,d as _,T as $,e as w,B as de,f as ue,h as A,i as G,k as pe,l as me,m as he,n as fe,o as Ce,I as Z,p as y,q as be,A as xe,C as I,t as ee,F as ge,L as ve,v as ye}from"./index.8f88e3ae.js";import{u as we,M as Se}from"./useCategory.06864a13.js";import{M as ke,C as Fe,i as Pe,T as Re,D as X}from"./datasheet.service.ac41bb1a.js";import{u as q,f as oe,M as $e,F as Me,T as Ie}from"./TextField.fdc1e789.js";import{T as Ne}from"./Tooltip.136a79d0.js";import"./category.service.b11701ab.js";function Te(e){return B("MuiCard",e)}L("MuiCard",["root"]);const De=["className","raised"],Be=e=>{const{classes:o}=e;return _({root:["root"]},Te,o)},Le=S(ie,{name:"MuiCard",slot:"Root",overridesResolver:(e,o)=>o.root})(()=>({overflow:"hidden"})),Ee=C.exports.forwardRef(function(o,r){const s=H({props:o,name:"MuiCard"}),{className:a,raised:l=!1}=s,p=E(s,De),i=d({},s,{raised:l}),m=Be(i);return t(Le,d({className:N(m.root,a),elevation:l?8:void 0,ref:r,ownerState:i},p))}),_e=Ee;function He(e){return B("MuiCardContent",e)}L("MuiCardContent",["root"]);const ze=["className","component"],Ae=e=>{const{classes:o}=e;return _({root:["root"]},He,o)},Oe=S("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Ue=C.exports.forwardRef(function(o,r){const s=H({props:o,name:"MuiCardContent"}),{className:a,component:l="div"}=s,p=E(s,ze),i=d({},s,{component:l}),m=Ae(i);return t(Oe,d({as:l,className:N(m.root,a),ownerState:i,ref:r},p))}),je=Ue;function Ge(e){return B("MuiCardHeader",e)}const qe=L("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Y=qe,We=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Ve=e=>{const{classes:o}=e;return _({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Ge,o)},Je=S("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,o)=>d({[`& .${Y.title}`]:o.title,[`& .${Y.subheader}`]:o.subheader},o.root)})({display:"flex",alignItems:"center",padding:16}),Ke=S("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,o)=>o.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Qe=S("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,o)=>o.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Xe=S("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,o)=>o.content})({flex:"1 1 auto"}),Ye=C.exports.forwardRef(function(o,r){const s=H({props:o,name:"MuiCardHeader"}),{action:a,avatar:l,className:p,component:i="div",disableTypography:m=!1,subheader:n,subheaderTypographyProps:u,title:b,titleTypographyProps:v}=s,F=E(s,We),g=d({},s,{component:i,disableTypography:m}),h=Ve(g);let c=b;c!=null&&c.type!==$&&!m&&(c=t($,d({variant:l?"body2":"h5",className:h.title,component:"span",display:"block"},v,{children:c})));let f=n;return f!=null&&f.type!==$&&!m&&(f=t($,d({variant:l?"body2":"body1",className:h.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:f}))),w(Je,d({className:N(h.root,p),as:i,ref:r,ownerState:g},F,{children:[l&&t(Ke,{className:h.avatar,ownerState:g,children:l}),w(Xe,{className:h.content,ownerState:g,children:[c,f]}),a&&t(Qe,{className:h.action,ownerState:g,children:a})]}))}),Ze=Ye;function eo(e){return B("PrivateSwitchBase",e)}L("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const oo=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],to=e=>{const{classes:o,checked:r,disabled:s,edge:a}=e,l={root:["root",r&&"checked",s&&"disabled",a&&`edge${A(a)}`],input:["input"]};return _(l,eo,o)},ro=S(de)(({ownerState:e})=>d({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),ao=S("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),so=C.exports.forwardRef(function(o,r){const{autoFocus:s,checked:a,checkedIcon:l,className:p,defaultChecked:i,disabled:m,disableFocusRipple:n=!1,edge:u=!1,icon:b,id:v,inputProps:F,inputRef:g,name:h,onBlur:c,onChange:f,onFocus:x,readOnly:k,required:T,tabIndex:D,type:P,value:V}=o,re=E(o,oo),[J,ae]=ue({controlled:a,default:Boolean(i),name:"SwitchBase",state:"checked"}),M=q(),se=R=>{x&&x(R),M&&M.onFocus&&M.onFocus(R)},ne=R=>{c&&c(R),M&&M.onBlur&&M.onBlur(R)},le=R=>{if(R.nativeEvent.defaultPrevented)return;const Q=R.target.checked;ae(Q),f&&f(R,Q)};let z=m;M&&typeof z>"u"&&(z=M.disabled);const ce=P==="checkbox"||P==="radio",U=d({},o,{checked:J,disabled:z,disableFocusRipple:n,edge:u}),K=to(U);return w(ro,d({component:"span",className:N(K.root,p),centerRipple:!0,focusRipple:!n,disabled:z,tabIndex:null,role:void 0,onFocus:se,onBlur:ne,ownerState:U,ref:r},re,{children:[t(ao,d({autoFocus:s,checked:a,defaultChecked:i,className:K.input,disabled:z,id:ce&&v,name:h,onChange:le,readOnly:k,ref:g,required:T,ownerState:U,tabIndex:D,type:P},P==="checkbox"&&V===void 0?{}:{value:V},F)),J?l:b]}))}),no=so,lo=G(t("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),co=G(t("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),io=G(t("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function uo(e){return B("MuiCheckbox",e)}const po=L("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),j=po,mo=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],ho=e=>{const{classes:o,indeterminate:r,color:s}=e,a={root:["root",r&&"indeterminate",`color${A(s)}`]},l=_(a,uo,o);return d({},o,l)},fo=S(no,{shouldForwardProp:e=>pe(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,r.indeterminate&&o.indeterminate,r.color!=="default"&&o[`color${A(r.color)}`]]}})(({theme:e,ownerState:o})=>d({color:(e.vars||e).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${o.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:me(o.color==="default"?e.palette.action.active:e.palette[o.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${j.checked}, &.${j.indeterminate}`]:{color:(e.vars||e).palette[o.color].main},[`&.${j.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),Co=t(co,{}),bo=t(lo,{}),xo=t(io,{}),go=C.exports.forwardRef(function(o,r){var s,a;const l=H({props:o,name:"MuiCheckbox"}),{checkedIcon:p=Co,color:i="primary",icon:m=bo,indeterminate:n=!1,indeterminateIcon:u=xo,inputProps:b,size:v="medium",className:F}=l,g=E(l,mo),h=n?u:m,c=n?u:p,f=d({},l,{color:i,indeterminate:n,size:v}),x=ho(f);return t(fo,d({type:"checkbox",inputProps:d({"data-indeterminate":n},b),icon:C.exports.cloneElement(h,{fontSize:(s=h.props.fontSize)!=null?s:v}),checkedIcon:C.exports.cloneElement(c,{fontSize:(a=c.props.fontSize)!=null?a:v}),ownerState:f,ref:r,className:N(x.root,F)},g,{classes:x}))}),vo=go;function yo(e){return B("MuiFormControlLabel",e)}const wo=L("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),O=wo,So=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],ko=e=>{const{classes:o,disabled:r,labelPlacement:s,error:a}=e,l={root:["root",r&&"disabled",`labelPlacement${A(s)}`,a&&"error"],label:["label",r&&"disabled"]};return _(l,yo,o)},Fo=S("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[{[`& .${O.label}`]:o.label},o.root,o[`labelPlacement${A(r.labelPlacement)}`]]}})(({theme:e,ownerState:o})=>d({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${O.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${O.label}`]:{[`&.${O.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Po=C.exports.forwardRef(function(o,r){var s;const a=H({props:o,name:"MuiFormControlLabel"}),{className:l,componentsProps:p={},control:i,disabled:m,disableTypography:n,label:u,labelPlacement:b="end",slotProps:v={}}=a,F=E(a,So),g=q();let h=m;typeof h>"u"&&typeof i.props.disabled<"u"&&(h=i.props.disabled),typeof h>"u"&&g&&(h=g.disabled);const c={disabled:h};["checked","name","onChange","value","inputRef"].forEach(P=>{typeof i.props[P]>"u"&&typeof a[P]<"u"&&(c[P]=a[P])});const f=oe({props:a,muiFormControl:g,states:["error"]}),x=d({},a,{disabled:h,labelPlacement:b,error:f.error}),k=ko(x),T=(s=v.typography)!=null?s:p.typography;let D=u;return D!=null&&D.type!==$&&!n&&(D=t($,d({component:"span"},T,{className:N(k.label,T==null?void 0:T.className),children:D}))),w(Fo,d({className:N(k.root,l),ownerState:x,ref:r},F,{children:[C.exports.cloneElement(i,c),D]}))}),Ro=Po;function $o(e){return B("MuiFormGroup",e)}L("MuiFormGroup",["root","row","error"]);const Mo=["className","row"],Io=e=>{const{classes:o,row:r,error:s}=e;return _({root:["root",r&&"row",s&&"error"]},$o,o)},No=S("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,r.row&&o.row]}})(({ownerState:e})=>d({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),To=C.exports.forwardRef(function(o,r){const s=H({props:o,name:"MuiFormGroup"}),{className:a,row:l=!1}=s,p=E(s,Mo),i=q(),m=oe({props:s,muiFormControl:i,states:["error"]}),n=d({},s,{row:l,error:m.error}),u=Io(n);return t(No,d({className:N(u.root,a),ownerState:n,ref:r},p))}),Do=To;var W={},Bo=fe.exports;Object.defineProperty(W,"__esModule",{value:!0});var te=W.default=void 0,Lo=Bo(he()),Eo=Ce,_o=(0,Lo.default)((0,Eo.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");te=W.default=_o;const Ho=({datasheet:e,actions:o})=>{var n;const r=o?Object.keys(o):void 0,[s,a]=C.exports.useState(null),l=Boolean(s),p=u=>{a(u.currentTarget)},i=()=>{a(null)},m=w("div",{children:[e.model&&t("span",{children:e.model}),t("br",{}),t("span",{className:"code",children:e.code})]});return w(_e,{sx:{maxWidth:250},children:[t(Ze,{action:t(Z,{"aria-label":"settings","aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:p,children:t(te,{})}),title:e.name,titleTypographyProps:{variant:"subtitle1"},subheader:m,subheaderTypographyProps:{variant:"subtitle2"}}),t($e,{id:"basic-menu",anchorEl:s,open:l,onClose:i,MenuListProps:{"aria-labelledby":"basic-button"},children:o&&r&&r.map(u=>t(ke,{onClick:()=>{i(),o[u].action(e._id)},children:o[u].icon},u))}),t(y,{display:"flex",flexWrap:"wrap",justifyContent:"center",children:t(Fe,{sx:{width:250,height:250},component:"img",image:(n=e.image)!=null?n:Pe,alt:"img"})}),t($,{component:"p",sx:{m:1},children:e==null?void 0:e.description}),t(je,{className:"card-datasheet",sx:{p:1,"&:last-child":{pb:1}},children:t(Re,{datasheet:e})})]})},zo=()=>{const e=be(),[o,r]=C.exports.useState([]),[s,a]=C.exports.useState([]),[l,p]=C.exports.useState(""),[i,m]=C.exports.useState([]),[n,u]=C.exports.useState(""),b=async()=>{const c=await X.getAll();c&&(r(c),a(c))},v=async c=>{await X.delete(c)&&(r(x=>x.filter(k=>k._id!==c)),a(x=>x.filter(k=>k._id!==c)),p(""))},F={cancel:{action:()=>p("")},confirm:{action:c=>v(c)}},g={edit:{icon:I.ICONS.EDIT,action:c=>e(c)},delete:{icon:I.ICONS.DELETE,action:c=>p(c)}},h=()=>{const c=o.filter(f=>{let x=!0;const k=f.categories;return i.forEach(T=>{x=k.includes(T)}),x}).filter(f=>{var x;return f.code.toLowerCase().includes(n)||f.name.toLowerCase().includes(n)||((x=f.model)==null?void 0:x.toLowerCase().includes(n))});a(c)};return C.exports.useEffect(()=>{h()},[i,n]),C.exports.useEffect(()=>{b()},[]),C.exports.useEffect(()=>()=>{xe.reset()}),{datasheets:o,deleteDatasheet:l,actionsModal:F,actionsCard:g,datasheetsToShow:s,setDatasheetsToShow:a,categoryFilter:i,setCategoryFilter:m,searchFilter:n,setSearchFilter:u}};const Ao=({filterAction:e})=>{const{t:o}=ee(),{categories:r}=we(),s=a=>{e(a.target.value)};return t(ge,{children:w(y,{display:"flex",flexDirection:"column",children:[t($,{variant:"h6",component:"div",sx:{color:"#1976D2"},children:o(I.CATEGORIES)}),t(Do,{children:r.map(a=>t(Ro,{control:t(vo,{}),value:a._id,onChange:s,label:a.name},a._id))})]})})},Vo=()=>{const{t:e}=ee(),{deleteDatasheet:o,actionsModal:r,actionsCard:s,datasheetsToShow:a,setCategoryFilter:l,setSearchFilter:p}=zo(),i=()=>n=>{var b;const u=(b=n.target.value)==null?void 0:b.toLowerCase();p(u)},m=n=>{l(u=>{let b=[...u];return b.includes(n)?b=b.filter(v=>v!==n):b.push(n),b})};return w(y,{display:"flex",flexDirection:"column",children:[t(y,{display:"flex",justifyContent:"flex-end",children:t(ve,{to:"new",children:t(Ne,{title:`${e(I.CREATE)}  ${e(I.DATASHEET)}`,children:t(Z,{children:I.ICONS.ADD})})})}),w(y,{display:"flex",sx:{mt:1,flexDirection:{xs:"column",md:"row",lg:"row"}},children:[t(y,{display:"flex",sx:{mt:3,width:{xs:"100%",md:"20%",lg:"15%"}},children:t(Ao,{filterAction:m})}),w(y,{display:"flex",flexDirection:"column",sx:{mt:1,width:{xs:"100%",md:"80%",lg:"85%"}},children:[t(y,{sx:{mt:1,width:{xs:"100%",md:"50%",lg:"50%"}},children:t(Me,{fullWidth:!0,margin:"normal",children:t(Ie,{size:"small",label:e(I.SEARCH),onChange:i()})})}),t(y,{display:"flex",flexWrap:"wrap",sx:{mt:1,justifyContent:{xs:"center",md:"flex-start",lg:"flex-start"}},children:a.map(n=>t(y,{sx:{m:1},children:t(Ho,{datasheet:n,actions:s})},n._id))}),o&&t(Se,{isOpen:!!o,handlerClose:r.cancel.action,children:w(y,{children:[t($,{component:"div",sx:{flexGrow:1},children:e(I.MESSAGE_ACTIONS.DELETE)}),t(y,{className:"actions-modal",children:r&&Object.keys(r).map(n=>t(ye,{variant:"contained",onClick:()=>r[n].action(o),children:e(n)},n))})]})})]})]})]})};export{Vo as Datasheet};
