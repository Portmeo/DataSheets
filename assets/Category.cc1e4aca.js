import{r as d,g as f,a as v,s as m,b as u,u as x,_ as h,j as l,c as $,d as R,w as T,ac as Z,x as S,ad as ee,J as D,k as X,F as Y,P as te,e as k,C,I as q,l as oe,A as ae,B as O,L as se,T as ne,m as re}from"./index.b8af492d.js";import{T as le,M as ie}from"./Modal.3896cb76.js";import{C as P}from"./category.service.a016eaf1.js";import"./requestHandler.service.9b52efe1.js";const ce=d.exports.createContext(),K=ce;function de(e){return f("MuiTable",e)}v("MuiTable",["root","stickyHeader"]);const pe=["className","component","padding","size","stickyHeader"],ue=e=>{const{classes:t,stickyHeader:o}=e;return R({root:["root",o&&"stickyHeader"]},de,t)},be=m("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>u({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":u({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),j="table",ge=d.exports.forwardRef(function(t,o){const a=x({props:t,name:"MuiTable"}),{className:r,component:s=j,padding:n="normal",size:i="medium",stickyHeader:p=!1}=a,c=h(a,pe),b=u({},a,{component:s,padding:n,size:i,stickyHeader:p}),y=ue(b),w=d.exports.useMemo(()=>({padding:n,size:i,stickyHeader:p}),[n,i,p]);return l(K.Provider,{value:w,children:l(be,u({as:s,role:s===j?null:"table",ref:o,className:$(y.root,r),ownerState:b},c))})}),ye=ge,Ce=d.exports.createContext(),A=Ce;function Te(e){return f("MuiTableBody",e)}v("MuiTableBody",["root"]);const fe=["className","component"],ve=e=>{const{classes:t}=e;return R({root:["root"]},Te,t)},me=m("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),xe={variant:"body"},I="tbody",he=d.exports.forwardRef(function(t,o){const a=x({props:t,name:"MuiTableBody"}),{className:r,component:s=I}=a,n=h(a,fe),i=u({},a,{component:s}),p=ve(i);return l(A.Provider,{value:xe,children:l(me,u({className:$(p.root,r),as:s,ref:o,role:s===I?null:"rowgroup",ownerState:i},n))})}),$e=he;function Re(e){return f("MuiTableCell",e)}const we=v("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ke=we,Me=["align","className","component","padding","scope","size","sortDirection","variant"],He=e=>{const{classes:t,variant:o,align:a,padding:r,size:s,stickyHeader:n}=e,i={root:["root",o,n&&"stickyHeader",a!=="inherit"&&`align${T(a)}`,r!=="normal"&&`padding${T(r)}`,`size${T(s)}`]};return R(i,Re,t)},Ne=m("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`size${T(o.size)}`],o.padding!=="normal"&&t[`padding${T(o.padding)}`],o.align!=="inherit"&&t[`align${T(o.align)}`],o.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>u({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?Z(S(e.palette.divider,1),.88):ee(S(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${ke.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),Se=d.exports.forwardRef(function(t,o){const a=x({props:t,name:"MuiTableCell"}),{align:r="inherit",className:s,component:n,padding:i,scope:p,size:c,sortDirection:b,variant:y}=a,w=h(a,Me),g=d.exports.useContext(K),M=d.exports.useContext(A),U=M&&M.variant==="head";let H;n?H=n:H=U?"th":"td";let z=p;!z&&U&&(z="col");const E=y||M&&M.variant,_=u({},a,{align:r,component:H,padding:i||(g&&g.padding?g.padding:"normal"),size:c||(g&&g.size?g.size:"medium"),sortDirection:b,stickyHeader:E==="head"&&g&&g.stickyHeader,variant:E}),V=He(_);let B=null;return b&&(B=b==="asc"?"ascending":"descending"),l(Ne,u({as:H,ref:o,className:$(V.root,s),"aria-sort":B,scope:z,ownerState:_},w))}),N=Se;function Ae(e){return f("MuiTableContainer",e)}v("MuiTableContainer",["root"]);const ze=["className","component"],Oe=e=>{const{classes:t}=e;return R({root:["root"]},Ae,t)},Ue=m("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),Ee=d.exports.forwardRef(function(t,o){const a=x({props:t,name:"MuiTableContainer"}),{className:r,component:s="div"}=a,n=h(a,ze),i=u({},a,{component:s}),p=Oe(i);return l(Ue,u({ref:o,as:s,className:$(p.root,r),ownerState:i},n))}),_e=Ee;function Be(e){return f("MuiTableHead",e)}v("MuiTableHead",["root"]);const De=["className","component"],Pe=e=>{const{classes:t}=e;return R({root:["root"]},Be,t)},je=m("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Ie={variant:"head"},L="thead",Le=d.exports.forwardRef(function(t,o){const a=x({props:t,name:"MuiTableHead"}),{className:r,component:s=L}=a,n=h(a,De),i=u({},a,{component:s}),p=Pe(i);return l(A.Provider,{value:Ie,children:l(je,u({as:s,className:$(p.root,r),ref:o,role:s===L?null:"rowgroup",ownerState:i},n))})}),Fe=Le;function We(e){return f("MuiTableRow",e)}const Ge=v("MuiTableRow",["root","selected","hover","head","footer"]),F=Ge,Je=["className","component","hover","selected"],Xe=e=>{const{classes:t,selected:o,hover:a,head:r,footer:s}=e;return R({root:["root",o&&"selected",a&&"hover",r&&"head",s&&"footer"]},We,t)},Ye=m("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.head&&t.head,o.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${F.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${F.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:S(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:S(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),W="tr",qe=d.exports.forwardRef(function(t,o){const a=x({props:t,name:"MuiTableRow"}),{className:r,component:s=W,hover:n=!1,selected:i=!1}=a,p=h(a,Je),c=d.exports.useContext(A),b=u({},a,{component:s,hover:n,selected:i,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),y=Xe(b);return l(Ye,u({as:s,ref:o,className:$(y.root,r),role:s===W?null:"row",ownerState:b},p))}),G=qe,Q=({rows:e,actions:t})=>{const{t:o}=X(),a=e.length?Object.keys(e[0]):void 0,r=t?Object.keys(t):void 0;return l(Y,{children:a&&l(_e,{component:te,children:k(ye,{sx:{minWidth:650},"aria-label":"table",children:[l(Fe,{children:k(G,{sx:{"& th":{color:"white",backgroundColor:"#1976D2"}},children:[a.map(s=>l(N,{children:o(s).toUpperCase()},s)),t&&l(N,{align:"right",children:o(C.ACTIONS).toUpperCase()})]})}),l($e,{children:e.map(s=>k(G,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[a.map(n=>l(N,{children:s[n]},n)),t&&r&&l(N,{align:"right",children:r.map(n=>l(q,{onClick:()=>t[n].action(s._id),children:t[n].icon},n))})]},s._id))})]})})})};Q.propTypes={rows:D.exports.array,actions:D.exports.object};const Ke=()=>{const e=oe(),[t,o]=d.exports.useState([]),[a,r]=d.exports.useState(""),s=async()=>{const c=await P.getAll();c&&o(c)},n=async c=>{await P.delete(c)&&(o(y=>y.filter(w=>w._id!==c)),r(""))},i={edit:{icon:C.ICONS.EDIT,action:c=>e(c)},delete:{icon:C.ICONS.DELETE,action:c=>r(c)}},p={cancel:{action:()=>r("")},confirm:{action:c=>n(c)}};return d.exports.useEffect(()=>{s()},[]),d.exports.useEffect(()=>()=>{ae.reset()}),{actionsModal:p,actionsTable:i,categories:t,deleteCategory:a}},J=e=>new Intl.DateTimeFormat("es-ES",{dateStyle:"medium",timeStyle:"medium"}).format(new Date(e));const tt=()=>{const{t:e}=X(),{categories:t,deleteCategory:o,actionsTable:a,actionsModal:r}=Ke(),s=t.map(n=>({_id:n._id,name:n.name,createdAt:J(n.createdAt),updatedAt:J(n.updatedAt)}));return k(Y,{children:[l(O,{display:"flex",justifyContent:"flex-end",children:l(se,{to:"new",children:l(le,{title:`${e(C.CREATE)}  ${e(C.CATEGORY)}`,children:l(q,{children:C.ICONS.ADD})})})}),l(Q,{rows:s,actions:a}),o&&l(ie,{isOpen:!!o,handlerClose:r.cancel.action,children:k(O,{children:[l(ne,{component:"div",sx:{flexGrow:1},children:e(C.MESSAGE_ACTIONS.DELETE)}),l(O,{className:"actions-modal",children:r&&Object.keys(r).map(n=>l(re,{variant:"contained",onClick:()=>r[n].action(o),children:e(n)},n))})]})})]})};export{tt as Category};
