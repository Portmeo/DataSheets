import{g as w,a as D,s as b,P as k,r as C,u as N,_ as R,b as f,j as a,c as H,d as E,T as g,e as x,f as L,i as O,h as U,I as j,B as u,k as B,A as W,C as v,l as q,L as z,m as F}from"./index.c631a681.js";import{M as G}from"./Modal.afeb80db.js";import{M as V,C as J,i as K,T as Q,D as $}from"./datasheet.service.67c09dd2.js";import{M as X,F as Y,T as Z}from"./TextField.c2e89fa7.js";import{T as ee}from"./Tooltip.42fc4602.js";import"./requestHandler.service.e6e607e6.js";function te(e){return w("MuiCard",e)}D("MuiCard",["root"]);const ae=["className","raised"],se=e=>{const{classes:t}=e;return E({root:["root"]},te,t)},oe=b(k,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),re=C.exports.forwardRef(function(t,r){const s=N({props:t,name:"MuiCard"}),{className:l,raised:n=!1}=s,d=R(s,ae),c=f({},s,{raised:n}),o=se(c);return a(oe,f({className:H(o.root,l),elevation:n?8:void 0,ref:r,ownerState:c},d))}),ne=re;function ie(e){return w("MuiCardContent",e)}D("MuiCardContent",["root"]);const le=["className","component"],ce=e=>{const{classes:t}=e;return E({root:["root"]},ie,t)},de=b("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),pe=C.exports.forwardRef(function(t,r){const s=N({props:t,name:"MuiCardContent"}),{className:l,component:n="div"}=s,d=R(s,le),c=f({},s,{component:n}),o=ce(c);return a(de,f({as:n,className:H(o.root,l),ownerState:c,ref:r},d))}),ue=pe;function he(e){return w("MuiCardHeader",e)}const me=D("MuiCardHeader",["root","avatar","action","content","title","subheader"]),P=me,Ce=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],fe=e=>{const{classes:t}=e;return E({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},he,t)},ve=b("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>f({[`& .${P.title}`]:t.title,[`& .${P.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),xe=b("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),ye=b("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),ge=b("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),be=C.exports.forwardRef(function(t,r){const s=N({props:t,name:"MuiCardHeader"}),{action:l,avatar:n,className:d,component:c="div",disableTypography:o=!1,subheader:h,subheaderTypographyProps:p,title:i,titleTypographyProps:A}=s,T=R(s,Ce),m=f({},s,{component:c,disableTypography:o}),y=fe(m);let S=i;S!=null&&S.type!==g&&!o&&(S=a(g,f({variant:n?"body2":"h5",className:y.title,component:"span",display:"block"},A,{children:S})));let M=h;return M!=null&&M.type!==g&&!o&&(M=a(g,f({variant:n?"body2":"body1",className:y.subheader,color:"text.secondary",component:"span",display:"block"},p,{children:M}))),x(ve,f({className:H(y.root,d),as:c,ref:r,ownerState:m},T,{children:[n&&a(xe,{className:y.avatar,ownerState:m,children:n}),x(ge,{className:y.content,ownerState:m,children:[S,M]}),l&&a(ye,{className:y.action,ownerState:m,children:l})]}))}),Te=be;var _={},Se=O.exports;Object.defineProperty(_,"__esModule",{value:!0});var I=_.default=void 0,Me=Se(L()),we=U,De=(0,Me.default)((0,we.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");I=_.default=De;const Ne=({datasheet:e,actions:t})=>{var h;const r=t?Object.keys(t):void 0,[s,l]=C.exports.useState(null),n=Boolean(s),d=p=>{l(p.currentTarget)},c=()=>{l(null)},o=x("div",{children:[e.model&&a("span",{children:e.model}),a("br",{}),a("span",{className:"code",children:e.code})]});return x(ne,{sx:{maxWidth:250},children:[a(Te,{action:a(j,{"aria-label":"settings","aria-controls":n?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,onClick:d,children:a(I,{})}),title:e.name,titleTypographyProps:{variant:"subtitle1"},subheader:o,subheaderTypographyProps:{variant:"subtitle2"}}),a(X,{id:"basic-menu",anchorEl:s,open:n,onClose:c,MenuListProps:{"aria-labelledby":"basic-button"},children:t&&r&&r.map(p=>a(V,{onClick:()=>{c(),t[p].action(e._id)},children:t[p].icon},p))}),a(u,{display:"flex",flexWrap:"wrap",justifyContent:"center",children:a(J,{sx:{width:250,height:250},component:"img",image:(h=e.image)!=null?h:K,alt:"img"})}),a(g,{component:"p",sx:{m:1},children:e==null?void 0:e.description}),a(ue,{className:"card-datasheet",sx:{p:1,"&:last-child":{pb:1}},children:a(Q,{datasheet:e})})]})},Re=()=>{const e=B(),[t,r]=C.exports.useState([]),[s,l]=C.exports.useState([]),[n,d]=C.exports.useState(""),c=async()=>{const i=await $.getAll();i&&(r(i),l(i))},o=async i=>{await $.delete(i)&&(r(T=>T.filter(m=>m._id!==i)),l(T=>T.filter(m=>m._id!==i)),d(""))},h={cancel:{action:()=>d("")},confirm:{action:i=>o(i)}},p={edit:{icon:v.ICONS.EDIT,action:i=>e(i)},delete:{icon:v.ICONS.DELETE,action:i=>d(i)}};return C.exports.useEffect(()=>{c()},[]),C.exports.useEffect(()=>()=>{W.reset()}),{datasheets:t,deleteDatasheet:n,actionsModal:h,actionsCard:p,datasheetsToShow:s,setDatasheetsToShow:l}};const je=()=>{const{t:e}=q(),{datasheets:t,deleteDatasheet:r,actionsModal:s,actionsCard:l,datasheetsToShow:n,setDatasheetsToShow:d}=Re(),c=()=>o=>{var p;const h=(p=o.target.value)==null?void 0:p.toLowerCase();d(t.filter(i=>i.name.toLowerCase().includes(h)||i.code.toLowerCase().includes(h)))};return x(u,{display:"flex",children:[a(u,{display:"flex"}),x(u,{display:"flex",flexDirection:"column",children:[a(u,{display:"flex",justifyContent:"flex-end",children:a(z,{to:"new",children:a(ee,{title:`${e(v.CREATE)}  ${e(v.DATASHEET)}`,children:a(j,{children:v.ICONS.ADD})})})}),a(u,{sx:{mt:1,width:{xs:"100%",md:"50%",lg:"50%"}},children:a(Y,{fullWidth:!0,margin:"normal",children:a(Z,{size:"small",label:e(v.SEARCH),onChange:c()})})}),a(u,{display:"flex",flexWrap:"wrap",justifyContent:"center",children:n.map(o=>a(u,{sx:{m:1},children:a(Ne,{datasheet:o,actions:l})},o._id))}),r&&a(G,{isOpen:!!r,handlerClose:s.cancel.action,children:x(u,{children:[a(g,{component:"div",sx:{flexGrow:1},children:e(v.MESSAGE_ACTIONS.DELETE)}),a(u,{className:"actions-modal",children:s&&Object.keys(s).map(o=>a(F,{variant:"contained",onClick:()=>s[o].action(r),children:e(o)},o))})]})})]})]})};export{je as Datasheet};
